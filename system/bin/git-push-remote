#!/bin/bash

CURRENT_BRANCH=`git-current-branch`

UPSTREAM_REMOTE=`git config branch.$CURRENT_BRANCH.remote`
UPSTREAM_BRANCH=`git config branch.$CURRENT_BRANCH.merge`
if [ -z "$UPSTREAM_BRANCH" ]; then
  git config branch.$CURRENT_BRANCH.remote origin
  git config branch.$CURRENT_BRANCH.merge $CURRENT_BRANCH
  git push -u origin $CURRENT_BRANCH
else
  echo "Branch $CURRENT_BRANCH is already configured to push to $UPSTREAM_REMOTE:$UPSTREAM_BRANCH"
fi
